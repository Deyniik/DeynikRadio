<header>
    <div class="header-left">
        <button id="themeSwitcher" class="theme-switcher"><i class="fas fa-palette"></i> –†–µ—Ç—Ä–æ</button>
    </div>
    <div class="header-center">
        <h1>üìª Deynik Radio</h1>
    </div>
    <div class="header-right">
        <button id="feedbackBtn" class="feedback-btn"><i class="fas fa-star"></i> –û—Ç–∑—ã–≤—ã</button>
        <button id="supportBtn" class="support-btn"><i class="fas fa-heart"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>

        <div id="authContainer">
            <button id="googleLoginBtn" class="google-login-btn" onclick="window.DeynikRadioSync.googleLogin()">
                <i class="fab fa-google"></i> –í–æ–π—Ç–∏
            </button>

            <div id="userProfile" class="user-profile" style="display: none;">
                <div id="userAvatar" class="user-avatar"></div>
                <span id="userName" class="user-name"></span>
                <i class="fas fa-caret-down"></i>
                <div id="user-dropdown" class="user-dropdown">
                    <div class="dropdown-item" onclick="showNicknameModal()"><i class="fas fa-user-edit"></i> –ù–∏–∫–Ω–µ–π–º</div>
                    <div class="dropdown-item" onclick="window.DeynikRadioSync.logout()"><i class="fas fa-sign-out-alt"></i> –í—ã—Ö–æ–¥</div>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
    // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ UI-–ª–æ–≥–∏–∫–∏ –∏ —Å–≤—è–∑–∏ —Å sync.js
    function updateHeaderUI() {
        const state = window.DeynikRadioSync.state;
        const authContainer = document.getElementById('authContainer');
        const loginBtn = document.getElementById('googleLoginBtn');
        const profileDiv = document.getElementById('userProfile');
        const avatarDiv = document.getElementById('userAvatar');
        const nameSpan = document.getElementById('userName');

        if (state.currentUser) {
            loginBtn.style.display = 'none';
            profileDiv.style.display = 'flex';
            const nickname = state.userNickname || state.currentUser.displayName;
            nameSpan.textContent = nickname;
            avatarDiv.textContent = nickname.charAt(0).toUpperCase();
        } else {
            loginBtn.style.display = 'flex';
            profileDiv.style.display = 'none';
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥—Ä–æ–ø–¥–∞—É–Ω–∞
        profileDiv.onclick = (e) => {
            e.stopPropagation();
            document.getElementById('user-dropdown').classList.toggle('show');
        };
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
        document.addEventListener('click', () => document.getElementById('user-dropdown').classList.remove('show'));
    }

    // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
    document.addEventListener('authChange', updateHeaderUI);
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    updateHeaderUI();
</script>
